# LB5_GPS

Данное веб-приложение, разработанное на базе Flask, предназначено для визуализации данных в реальном времени. Оно использует WebSocket для получения информации о позициях объектов и спутников. Приложение позволяет динамически обновлять графики прямо в браузере и предоставляет API для изменения параметров моделирования.

### Основные компоненты системы:

1. **Flask**  
   Серверная часть обрабатывает запросы пользователей, генерирует HTML-страницы и предоставляет API для взаимодействия с данными.

2. **WebSocket**  
   Позволяет установить постоянное соединение с сервером для получения данных в реальном времени. Это исключает необходимость перезагрузки страницы для обновления информации.

3. **CORS**  
   Включена поддержка Cross-Origin Resource Sharing (CORS), что позволяет обмениваться данными между различными доменами, если это требуется.

---

### Структура кода:

- **Главная страница**  
  Основной маршрут `/` загружает HTML-шаблон `index.html`, в котором отображается график с полученными данными.

- **API для изменения параметров**  
  Маршрут `/config` обрабатывает POST-запросы, принимая параметры, такие как размеры зоны моделирования, частота обновлений, а также скорости движения объектов и спутников. По итогам обработки возвращается статус операции.

- **API для получения данных**  
  Маршрут `/data` проверяет наличие достаточного числа точек в массиве `data` и вычисляет координаты для трёх точек, поступающих через WebSocket. При нехватке данных возвращается сообщение об ошибке.

---

### Обработка данных через WebSocket:

- **on_message**  
  Функция отвечает за обработку входящих сообщений. Она разбирает JSON-данные, содержащие координаты, метки времени и идентификаторы точек. Если точка с указанным идентификатором уже существует, данные обновляются, иначе добавляется новая точка в массив `data`.

- **Управление данными**  
  Для поддержания актуальности массива старая информация удаляется, если её возраст превышает заданный временной интервал (например, 4 секунды).

- **Определение позиции**  
  Функция `location` вычисляет координаты центра трёх точек, что используется для визуализации метода триангуляции.

---

### Запуск приложения:

Приложение запускается в отдельных потоках для Flask и WebSocket, что позволяет одновременно обрабатывать запросы и обновлять данные. После старта сервер доступен по адресу:  
- HTTP: `http://localhost:5000`  
- WebSocket: `ws://localhost:4001`.